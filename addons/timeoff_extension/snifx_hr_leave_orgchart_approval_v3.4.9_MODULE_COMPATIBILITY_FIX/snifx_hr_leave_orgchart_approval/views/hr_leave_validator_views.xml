<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <!-- Tambah filter "Assigned to Me" di search view Time Off -->
    <record id="hr_leave_view_search_validator" model="ir.ui.view">
      <field name="name">hr.leave.search.validator</field>
      <field name="model">hr.leave</field>
      <field name="arch" type="xml">
        <search string="Time Off">
                <filter name="assigned_to_me"
                        string="Assigned to Me"
                        domain="[('validation_status_ids.user_id','=',uid)]"/>
                <filter name="to_approve"
                        string="To Approve"
                        domain="[('state','=','confirm')]"/>
                <field name="employee_id"/>
                <field name="holiday_status_id"/>
                <group expand="0" string="Group By">
                        <filter string="Employee" context="{'group_by':'employee_id'}"/>
                        <filter string="Time Off Type" context="{'group_by':'holiday_status_id'}"/>
                </group>
        </search>
      </field>
    </record>

    <!-- Action khusus: hanya request yang ditugaskan ke user login dan masih dalam proses -->
    <record id="action_hr_leave_to_approve_by_validator" model="ir.actions.act_window">
      <field name="name">Approvals (Assigned to Me)</field>
      <field name="res_model">hr.leave</field>
      <field name="view_mode">tree,form,calendar,pivot,graph,activity</field>
      <field name="search_view_id" ref="hr_leave_view_search_validator"/>
      <field name="domain">[('validation_status_ids.user_id','=',uid), ('state','in',('confirm','validate1'))]</field>
      <field name="context">{'search_default_assigned_to_me': 1}</field>
    </record>

    <!-- Menu di bawah Management untuk validator -->
    <menuitem id="menu_hr_leave_to_approve_by_validator"
              name="Approvals (Assigned to Me)"
              parent="hr_holidays.menu_hr_holidays_management"
              action="action_hr_leave_to_approve_by_validator"
              groups="base.group_user"
              sequence="25"/>

  </data>
</odoo>
